<!DOCTYPE html>
<html lang="en" dir="ltr">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Media Downloader | Professional Tool</title>

    <!-- CSS -->
    <link rel="stylesheet" href="css/style.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">

    <!-- Favicon -->
    <link rel="icon"
        href="data:image/svg+xml,<svg xmlns=%22http://www.w3.org/2000/svg%22 viewBox=%220 0 100 100%22><text y=%22.9em%22 font-size=%2290%22>üé¨</text></svg>">
</head>

<body>

    <!-- Loading Overlay -->
    <div id="loading-overlay" class="loading-overlay">
        <div class="spinner"></div>
    </div>

    <div class="container">
        <!-- Header -->
        <header>
            <div class="logo">
                <span>üé¨</span>
                <span data-i18n="title">Media Downloader API</span>
            </div>
            <button id="lang-switch" class="lang-switch-btn">
                üåê Language / ÿ≤ÿ®ÿßŸÜ
            </button>
        </header>

        <!-- Platform Tabs -->
        <div class="platform-tabs">
            <button class="platform-btn youtube active" data-platform="youtube" data-i18n="youtube">YouTube</button>
            <button class="platform-btn instagram" data-platform="instagram" data-i18n="instagram">Instagram</button>
        </div>

        <!-- Main Content -->
        <main class="main-content">
            <!-- Sidebar (Features) -->
            <aside class="sidebar">
                <div class="nav-item active" data-feature="video">
                    <i class="fas fa-video"></i>
                    <span data-i18n="video">Video</span>
                </div>
                <div class="nav-item" data-feature="playlist">
                    <i class="fas fa-list"></i>
                    <span data-i18n="playlist">Playlist</span>
                </div>
                <div class="nav-item" data-feature="formats">
                    <i class="fas fa-cog"></i>
                    <span data-i18n="formats">Formats</span>
                </div>
                <div class="nav-item" data-feature="subtitles">
                    <i class="fas fa-closed-captioning"></i>
                    <span data-i18n="subtitles">Subtitles</span>
                </div>
                <div class="nav-item" data-feature="thumbnail">
                    <i class="fas fa-image"></i>
                    <span data-i18n="thumbnail">Thumbnail</span>
                </div>
                <div class="nav-item" data-feature="batch">
                    <i class="fas fa-layer-group"></i>
                    <span data-i18n="batch">Batch</span>
                </div>
                <div class="nav-item" data-feature="jobs">
                    <i class="fas fa-tasks"></i>
                    <span data-i18n="jobs">Jobs</span>
                </div>
                <div class="nav-item" data-feature="stream">
                    <i class="fas fa-stream"></i>
                    <span data-i18n="stream">Stream</span>
                </div>
            </aside>

            <!-- Content Area -->
            <section class="content-panel">

                <!-- YouTube Section -->
                <div id="section-youtube" class="panel-section active">
                    <h2 data-i18n="youtube">YouTube</h2>
                    
                    <!-- Video Info Tab -->
                    <div id="feature-video" class="feature-section active">
                        <div class="form-group">
                            <label for="yt-url" data-i18n="enterUrl">Enter URL here...</label>
                            <input type="text" id="yt-url" placeholder="https://youtube.com/watch?v=...">
                        </div>
                        <div class="button-group">
                            <button id="btn-yt-info" class="action-btn" title="Get video information and metadata">
                                <i class="fas fa-info-circle"></i>
                                <span data-i18n="getInfo">Get Info</span>
                            </button>
                            <button id="btn-yt-formats" class="action-btn secondary" title="Get available video formats and qualities">
                                <i class="fas fa-cog"></i>
                                <span data-i18n="getFormats">Get Formats</span>
                            </button>
                            <button id="btn-yt-download" class="action-btn tertiary" title="Configure download options">
                                <i class="fas fa-download"></i>
                                <span data-i18n="download">Download</span>
                            </button>
                        </div>
                        <!-- Download Form (hidden by default) -->
                        <div id="video-download-form" class="video-download-form" style="display: none;">
                            <div class="form-group">
                                <label for="yt-download-quality" data-i18n="quality">Quality</label>
                                <select id="yt-download-quality">
                                    <option value="best">Best</option>
                                    <option value="720p">720p</option>
                                    <option value="1080p">1080p</option>
                                    <option value="1440p">1440p</option>
                                    <option value="4k">4K</option>
                                    <option value="audio_only">Audio Only</option>
                                </select>
                            </div>
                            <div class="form-group">
                                <label for="yt-download-type" data-i18n="type">Type</label>
                                <select id="yt-download-type">
                                    <option value="video">Video</option>
                                    <option value="audio">Audio</option>
                                </select>
                            </div>
                            <button id="btn-yt-start-download" class="action-btn">
                                <i class="fas fa-play"></i>
                                <span data-i18n="startDownload">Start Download</span>
                            </button>
                        </div>
                    </div>

                    <!-- Playlist Tab -->
                    <div id="feature-playlist" class="feature-section">
                        <div class="form-group">
                            <label for="yt-playlist-url" data-i18n="enterPlaylistUrl">Enter Playlist URL...</label>
                            <input type="text" id="yt-playlist-url" placeholder="https://youtube.com/playlist?list=...">
                        </div>
                        <div class="button-group">
                            <button id="btn-yt-playlist-info" class="action-btn">
                                <i class="fas fa-info-circle"></i>
                                <span data-i18n="getInfo">Get Info</span>
                            </button>
                            <button id="btn-yt-playlist-download-all" class="action-btn secondary">
                                <i class="fas fa-download"></i>
                                <span data-i18n="downloadAll">Download All</span>
                            </button>
                            <button id="btn-yt-playlist-select" class="action-btn tertiary">
                                <i class="fas fa-list-check"></i>
                                <span data-i18n="selectDownload">Select Videos</span>
                            </button>
                        </div>
                        <!-- Playlist Select Form (hidden by default) -->
                        <div id="playlist-select-form" class="playlist-select-form" style="display: none;">
                            <div class="form-group">
                                <label for="yt-playlist-video-indices" data-i18n="videoIndices">Video Indices (comma-separated, e.g., 0,2,5)</label>
                                <input type="text" id="yt-playlist-video-indices" placeholder="0,2,5">
                            </div>
                            <div class="form-group">
                                <label for="yt-playlist-select-quality" data-i18n="quality">Quality</label>
                                <select id="yt-playlist-select-quality">
                                    <option value="best">Best</option>
                                    <option value="720p">720p</option>
                                    <option value="1080p">1080p</option>
                                    <option value="audio_only">Audio Only</option>
                                </select>
                            </div>
                            <button id="btn-yt-playlist-download-select" class="action-btn">
                                <i class="fas fa-download"></i>
                                <span data-i18n="downloadSelected">Download Selected</span>
                            </button>
                        </div>
                    </div>

                    <!-- Formats Tab -->
                    <div id="feature-formats" class="feature-section">
                        <div class="form-group">
                            <label for="yt-formats-url" data-i18n="enterUrl">Enter Video URL...</label>
                            <input type="text" id="yt-formats-url" placeholder="https://youtube.com/watch?v=...">
                        </div>
                        <button id="btn-yt-get-formats" class="action-btn">
                            <i class="fas fa-cog"></i>
                            <span data-i18n="getFormats">Get Formats</span>
                        </button>
                    </div>

                    <!-- Subtitles Tab -->
                    <div id="feature-subtitles" class="feature-section">
                        <div class="form-group">
                            <label for="yt-subtitles-url" data-i18n="enterUrl">Enter Video URL...</label>
                            <input type="text" id="yt-subtitles-url" placeholder="https://youtube.com/watch?v=...">
                        </div>
                        <div class="form-group">
                            <label for="yt-subtitles-lang" data-i18n="language">Language</label>
                            <select id="yt-subtitles-lang">
                                <option value="all">All Languages</option>
                                <option value="en">English</option>
                                <option value="fa">Persian</option>
                                <option value="es">Spanish</option>
                                <option value="fr">French</option>
                                <option value="de">German</option>
                            </select>
                        </div>
                        <button id="btn-yt-get-subtitles" class="action-btn">
                            <i class="fas fa-closed-captioning"></i>
                            <span data-i18n="getSubtitles">Get Subtitles</span>
                        </button>
                    </div>

                    <!-- Thumbnail Tab -->
                    <div id="feature-thumbnail" class="feature-section">
                        <div class="form-group">
                            <label for="yt-thumbnail-url" data-i18n="enterUrl">Enter Video URL...</label>
                            <input type="text" id="yt-thumbnail-url" placeholder="https://youtube.com/watch?v=...">
                        </div>
                        <div class="form-group">
                            <label for="yt-thumbnail-quality" data-i18n="quality">Quality</label>
                            <select id="yt-thumbnail-quality">
                                <option value="maxres">Max Resolution</option>
                                <option value="hq">High Quality</option>
                                <option value="mq">Medium Quality</option>
                                <option value="sd">Standard</option>
                                <option value="default">Default</option>
                            </select>
                        </div>
                        <button id="btn-yt-get-thumbnail" class="action-btn">
                            <i class="fas fa-image"></i>
                            <span data-i18n="getThumbnail">Get Thumbnail</span>
                        </button>
                    </div>

                    <!-- Batch Download Tab -->
                    <div id="feature-batch" class="feature-section">
                        <div class="form-group">
                            <label for="yt-batch-urls" data-i18n="enterUrls">Enter URLs (one per line, max 10)</label>
                            <textarea id="yt-batch-urls" rows="5" placeholder="https://youtube.com/watch?v=...&#10;https://youtube.com/watch?v=..."></textarea>
                        </div>
                        <div class="form-group">
                            <label for="yt-batch-quality" data-i18n="quality">Quality</label>
                            <select id="yt-batch-quality">
                                <option value="best">Best</option>
                                <option value="720p">720p</option>
                                <option value="1080p">1080p</option>
                                <option value="audio_only">Audio Only</option>
                            </select>
                        </div>
                        <button id="btn-yt-batch-download" class="action-btn">
                            <i class="fas fa-download"></i>
                            <span data-i18n="startBatch">Start Batch Download</span>
                        </button>
                    </div>

                    <!-- Jobs Tab -->
                    <div id="feature-jobs" class="feature-section">
                        <div class="jobs-controls">
                            <div class="form-group">
                                <label for="jobs-filter" data-i18n="filterJobs">Filter Jobs</label>
                                <select id="jobs-filter">
                                    <option value="all">All Jobs</option>
                                    <option value="completed">Completed</option>
                                    <option value="processing">Processing</option>
                                    <option value="failed">Failed</option>
                                    <option value="cancelled">Cancelled</option>
                                </select>
                            </div>
                            <button id="btn-refresh-jobs" class="action-btn secondary">
                                <i class="fas fa-sync-alt"></i>
                                <span data-i18n="refresh">Refresh</span>
                            </button>
                        </div>
                        <div id="jobs-list" class="jobs-list"></div>
                    </div>

                    <!-- Stream Tab -->
                    <div id="feature-stream" class="feature-section">
                        <div class="form-group">
                            <label for="yt-stream-url" data-i18n="enterUrl">Enter Video URL...</label>
                            <input type="text" id="yt-stream-url" placeholder="https://youtube.com/watch?v=...">
                        </div>
                        <div class="form-group">
                            <label for="yt-stream-quality" data-i18n="quality">Quality</label>
                            <select id="yt-stream-quality">
                                <option value="best">Best</option>
                                <option value="720p">720p</option>
                                <option value="1080p">1080p</option>
                            </select>
                        </div>
                        <button id="btn-yt-stream" class="action-btn">
                            <i class="fas fa-play"></i>
                            <span data-i18n="startStream">Start Stream</span>
                        </button>
                        <div id="stream-player" class="stream-player-container" style="display: none; margin-top: 1rem;">
                            <video id="video-stream" width="100%" height="400" controls style="border-radius: var(--radius-md); background: #000;"></video>
                        </div>
                    </div>
                </div>

                <!-- Instagram Section -->
                <div id="section-instagram" class="panel-section">
                    <h2 data-i18n="instagram">Instagram</h2>
                    
                    <!-- Post Tab -->
                    <div id="feature-ig-post" class="feature-section active">
                        <div class="form-group">
                            <label for="ig-post-url" data-i18n="enterUrl">Enter Post URL...</label>
                            <input type="text" id="ig-post-url" placeholder="https://instagram.com/p/...">
                        </div>
                        <div class="button-group">
                            <button id="btn-ig-post-info" class="action-btn">
                                <i class="fas fa-info-circle"></i>
                                <span data-i18n="getInfo">Get Info</span>
                            </button>
                            <button id="btn-ig-post-download" class="action-btn secondary">
                                <i class="fas fa-download"></i>
                                <span data-i18n="download">Download</span>
                            </button>
                        </div>
                    </div>

                    <!-- Reel Tab -->
                    <div id="feature-ig-reel" class="feature-section">
                        <div class="form-group">
                            <label for="ig-reel-url" data-i18n="enterUrl">Enter Reel URL...</label>
                            <input type="text" id="ig-reel-url" placeholder="https://instagram.com/reel/...">
                        </div>
                        <div class="button-group">
                            <button id="btn-ig-reel-info" class="action-btn">
                                <i class="fas fa-info-circle"></i>
                                <span data-i18n="getInfo">Get Info</span>
                            </button>
                            <button id="btn-ig-reel-download" class="action-btn secondary">
                                <i class="fas fa-download"></i>
                                <span data-i18n="download">Download</span>
                            </button>
                        </div>
                    </div>

                    <!-- Profile Tab -->
                    <div id="feature-ig-profile" class="feature-section">
                        <div class="form-group">
                            <label for="ig-username" data-i18n="username">Username</label>
                            <input type="text" id="ig-username" placeholder="instagram">
                        </div>
                        <div class="button-group">
                            <button id="btn-ig-profile-info" class="action-btn">
                                <i class="fas fa-info-circle"></i>
                                <span data-i18n="getInfo">Get Info</span>
                            </button>
                            <button id="btn-ig-profile-posts" class="action-btn secondary">
                                <i class="fas fa-images"></i>
                                <span data-i18n="getPosts">Get Posts</span>
                            </button>
                        </div>
                    </div>

                    <!-- Stories Tab -->
                    <div id="feature-ig-stories" class="feature-section">
                        <div class="form-group">
                            <label for="ig-stories-username" data-i18n="username">Username</label>
                            <input type="text" id="ig-stories-username" placeholder="instagram">
                        </div>
                        <div class="button-group">
                            <button id="btn-ig-stories-info" class="action-btn">
                                <i class="fas fa-info-circle"></i>
                                <span data-i18n="getInfo">Get Stories Info</span>
                            </button>
                            <button id="btn-ig-stories-download" class="action-btn secondary">
                                <i class="fas fa-download"></i>
                                <span data-i18n="download">Download Stories</span>
                            </button>
                        </div>
                    </div>

                    <!-- Carousel Tab -->
                    <div id="feature-ig-carousel" class="feature-section">
                        <div class="form-group">
                            <label for="ig-carousel-url" data-i18n="enterUrl">Enter Carousel URL...</label>
                            <input type="text" id="ig-carousel-url" placeholder="https://instagram.com/p/...">
                        </div>
                        <div class="form-group">
                            <label for="ig-carousel-quality" data-i18n="quality">Quality</label>
                            <select id="ig-carousel-quality">
                                <option value="best">Best</option>
                                <option value="high">High</option>
                                <option value="medium">Medium</option>
                            </select>
                        </div>
                        <button id="btn-ig-carousel-download" class="action-btn">
                            <i class="fas fa-download"></i>
                            <span data-i18n="downloadCarousel">Download Carousel (ZIP)</span>
                        </button>
                    </div>

                    <!-- Post Stats Tab -->
                    <div id="feature-ig-post-stats" class="feature-section">
                        <div class="form-group">
                            <label for="ig-post-stats-url" data-i18n="enterUrl">Enter Post URL...</label>
                            <input type="text" id="ig-post-stats-url" placeholder="https://instagram.com/p/...">
                        </div>
                        <button id="btn-ig-post-stats" class="action-btn">
                            <i class="fas fa-chart-bar"></i>
                            <span data-i18n="getStats">Get Post Statistics</span>
                        </button>
                    </div>

                    <!-- Reel Stats Tab -->
                    <div id="feature-ig-reel-stats" class="feature-section">
                        <div class="form-group">
                            <label for="ig-reel-stats-url" data-i18n="enterUrl">Enter Reel URL...</label>
                            <input type="text" id="ig-reel-stats-url" placeholder="https://instagram.com/reel/...">
                        </div>
                        <button id="btn-ig-reel-stats" class="action-btn">
                            <i class="fas fa-chart-bar"></i>
                            <span data-i18n="getStats">Get Reel Statistics</span>
                        </button>
                    </div>

                    <!-- Batch Download Tab -->
                    <div id="feature-ig-batch" class="feature-section">
                        <div class="form-group">
                            <label for="ig-batch-items" data-i18n="batchItems">Batch Items (JSON format)</label>
                            <textarea id="ig-batch-items" rows="5" placeholder='[{"url": "https://instagram.com/p/...", "type": "post"}, {"url": "https://instagram.com/reel/...", "type": "reel"}]'></textarea>
                        </div>
                        <div class="form-group">
                            <label for="ig-batch-quality" data-i18n="quality">Quality</label>
                            <select id="ig-batch-quality">
                                <option value="best">Best</option>
                                <option value="high">High</option>
                                <option value="medium">Medium</option>
                            </select>
                        </div>
                        <div class="form-group">
                            <label for="ig-batch-format" data-i18n="format">Format</label>
                            <select id="ig-batch-format">
                                <option value="individual">Individual Files</option>
                                <option value="zip">ZIP Archive</option>
                            </select>
                        </div>
                        <button id="btn-ig-batch-download" class="action-btn">
                            <i class="fas fa-download"></i>
                            <span data-i18n="startBatch">Start Batch Download</span>
                        </button>
                    </div>

                    <!-- Jobs Tab -->
                    <div id="feature-ig-jobs" class="feature-section">
                        <div class="jobs-controls">
                            <div class="form-group">
                                <label for="ig-jobs-filter" data-i18n="filterJobs">Filter Jobs</label>
                                <select id="ig-jobs-filter">
                                    <option value="all">All Jobs</option>
                                    <option value="completed">Completed</option>
                                    <option value="processing">Processing</option>
                                    <option value="failed">Failed</option>
                                    <option value="cancelled">Cancelled</option>
                                </select>
                            </div>
                            <button id="btn-ig-refresh-jobs" class="action-btn secondary">
                                <i class="fas fa-sync-alt"></i>
                                <span data-i18n="refresh">Refresh</span>
                            </button>
                        </div>
                        <div id="ig-jobs-list" class="jobs-list"></div>
                    </div>
                </div>

                <!-- Results Area -->
                <div id="results-area" class="results-container">
                    <!-- Results will be injected here via JS -->
                </div>

            </section>

            <!-- API Console (New) -->
            <aside id="api-console" class="api-console">
                <div class="api-console-header">
                    <h3>API Console</h3>
                    <div class="api-console-sub">Test endpoints, send requests, view responses</div>
                </div>

                <div class="form-group">
                    <label for="api-base">API Base URL</label>
                    <input id="api-base" placeholder="/ or https://api.example.com" value="">
                </div>

                <div class="form-group">
                    <label for="api-endpoint">Endpoint</label>
                    <select id="api-endpoint">
                        <option value="/info?url=">YouTube: Get Info (/info?url=)</option>
                        <option value="/formats?url=">YouTube: Get Formats (/formats?url=)</option>
                        <option value="/download/single">YouTube: Start Download (POST /download/single)</option>
                        <option value="/download/batch">YouTube: Start Batch (POST /download/batch)</option>
                        <option value="/thumbnail?url=">YouTube: Thumbnail (/thumbnail?url=)</option>
                        <option value="/subtitles?url=">YouTube: Subtitles (/subtitles?url=)</option>
                        <option value="/stream/video?url=">YouTube: Stream (/stream/video?url=)</option>
                        <option value="/instagram/post/info?url=">IG: Post Info (/instagram/post/info?url=)</option>
                        <option value="/instagram/reel/info?url=">IG: Reel Info (/instagram/reel/info?url=)</option>
                        <option value="/instagram/download/post">IG: Download Post (POST /instagram/download/post)</option>
                        <option value="/instagram/download/reel">IG: Download Reel (POST /instagram/download/reel)</option>
                        <option value="/health">Health Check (/health)</option>
                    </select>
                </div>

                <div class="form-row">
                    <div class="form-group" style="flex:1">
                        <label for="api-method">Method</label>
                        <select id="api-method">
                            <option value="GET">GET</option>
                            <option value="POST">POST</option>
                            <option value="PUT">PUT</option>
                            <option value="DELETE">DELETE</option>
                        </select>
                    </div>
                    <div class="form-group" style="flex:1; margin-left: 0.75rem;">
                        <label for="api-params">Query / URL Params</label>
                        <input id="api-params" placeholder="e.g. url=https://... or ?limit=10">
                    </div>
                </div>

                <div class="form-group">
                    <label for="api-body">JSON Body (for POST)</label>
                    <textarea id="api-body" rows="6" placeholder='{"url":"https://...","quality":"best"}'></textarea>
                </div>

                <div class="button-group" style="margin-bottom: 1rem;">
                    <button id="api-send" class="action-btn">Send Request</button>
                    <button id="api-copy-curl" class="action-btn secondary">Copy cURL</button>
                    <button id="api-clear" class="action-btn tertiary">Clear</button>
                </div>

                <div class="api-response">
                    <div class="result-header"><h4>Response</h4></div>
                    <div id="api-response-area" class="json-viewer">No response yet.</div>
                </div>

                <div class="api-history">
                    <div class="result-header"><h4>History</h4></div>
                    <div id="api-history-list" style="color:var(--text-muted); font-size:0.9rem;">No history.</div>
                </div>
            </aside>
        </main>
    </div>

    <!-- Footer -->
    <footer>
        <div class="footer-content">
            <p>Designed by <span class="highlight">Mezd</span> and powered by <span class="highlight">Mezdia</span>.</p>
            <div class="footer-decoration">
                <div class="decoration-line"></div>
                <i class="fas fa-code"></i>
                <div class="decoration-line"></div>
            </div>
        </div>
    </footer>

    <!-- Scripts -->
    <script src="js/api.js"></script>
    <script src="js/ui.js"></script>
</body>

</html>