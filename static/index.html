<!DOCTYPE html>
<html lang="en" dir="ltr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>YouTube Downloader API - Test UI</title>
    <style>
        :root {
            --primary: #ff0000;
            --primary-dark: #cc0000;
            --bg: #0f0f0f;
            --card-bg: #1a1a1a;
            --text: #ffffff;
            --text-secondary: #aaaaaa;
            --border: #333333;
            --success: #00c853;
            --error: #ff5252;
        }
        
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        
        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, sans-serif;
            background: var(--bg);
            color: var(--text);
            min-height: 100vh;
            line-height: 1.6;
        }
        
        .rtl {
            direction: rtl;
            text-align: right;
        }
        
        .container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 20px;
        }
        
        header {
            text-align: center;
            padding: 30px 0;
            border-bottom: 1px solid var(--border);
            margin-bottom: 30px;
        }
        
        h1 {
            font-size: 2.5em;
            margin-bottom: 10px;
            color: var(--primary);
        }
        
        .subtitle {
            color: var(--text-secondary);
            font-size: 1.1em;
        }
        
        .lang-switch {
            position: fixed;
            top: 20px;
            right: 20px;
            z-index: 1000;
        }
        
        .lang-btn {
            background: var(--card-bg);
            border: 1px solid var(--border);
            color: var(--text);
            padding: 8px 16px;
            cursor: pointer;
            font-size: 14px;
            border-radius: 4px;
            transition: all 0.3s;
        }
        
        .lang-btn:hover {
            background: var(--primary);
        }
        
        .warning {
            background: rgba(255, 82, 82, 0.1);
            border: 1px solid var(--error);
            border-radius: 8px;
            padding: 15px;
            margin-bottom: 30px;
            font-size: 0.9em;
        }
        
        .tabs {
            display: flex;
            gap: 10px;
            flex-wrap: wrap;
            margin-bottom: 20px;
        }
        
        .tab-btn {
            background: var(--card-bg);
            border: 1px solid var(--border);
            color: var(--text);
            padding: 12px 24px;
            cursor: pointer;
            border-radius: 8px;
            font-size: 14px;
            transition: all 0.3s;
        }
        
        .tab-btn:hover, .tab-btn.active {
            background: var(--primary);
            border-color: var(--primary);
        }
        
        .tab-content {
            display: none;
        }
        
        .tab-content.active {
            display: block;
        }
        
        .card {
            background: var(--card-bg);
            border: 1px solid var(--border);
            border-radius: 12px;
            padding: 25px;
            margin-bottom: 20px;
        }
        
        .card h3 {
            margin-bottom: 20px;
            color: var(--primary);
        }
        
        .form-group {
            margin-bottom: 20px;
        }
        
        label {
            display: block;
            margin-bottom: 8px;
            color: var(--text-secondary);
            font-size: 14px;
        }
        
        input, select, textarea {
            width: 100%;
            padding: 12px 16px;
            background: var(--bg);
            border: 1px solid var(--border);
            border-radius: 8px;
            color: var(--text);
            font-size: 14px;
        }
        
        input:focus, select:focus, textarea:focus {
            outline: none;
            border-color: var(--primary);
        }
        
        .btn {
            background: var(--primary);
            color: white;
            border: none;
            padding: 14px 28px;
            border-radius: 8px;
            cursor: pointer;
            font-size: 16px;
            font-weight: 600;
            transition: all 0.3s;
        }
        
        .btn:hover {
            background: var(--primary-dark);
        }
        
        .btn:disabled {
            opacity: 0.5;
            cursor: not-allowed;
        }
        
        .result {
            margin-top: 20px;
            padding: 20px;
            background: var(--bg);
            border-radius: 8px;
            border: 1px solid var(--border);
            max-height: 400px;
            overflow-y: auto;
        }
        
        .result pre {
            white-space: pre-wrap;
            word-wrap: break-word;
            font-size: 13px;
            color: var(--text-secondary);
        }
        
        .result.success {
            border-color: var(--success);
        }
        
        .result.error {
            border-color: var(--error);
        }
        
        .loading {
            display: none;
            text-align: center;
            padding: 20px;
        }
        
        .loading.show {
            display: block;
        }
        
        .spinner {
            border: 3px solid var(--border);
            border-top-color: var(--primary);
            border-radius: 50%;
            width: 30px;
            height: 30px;
            animation: spin 1s linear infinite;
            margin: 0 auto 10px;
        }
        
        @keyframes spin {
            to { transform: rotate(360deg); }
        }
        
        .progress-bar {
            width: 100%;
            height: 8px;
            background: var(--border);
            border-radius: 4px;
            overflow: hidden;
            margin-top: 10px;
        }
        
        .progress-fill {
            height: 100%;
            background: var(--primary);
            transition: width 0.3s;
        }
        
        .download-link {
            display: inline-block;
            margin-top: 10px;
            padding: 10px 20px;
            background: var(--success);
            color: white;
            text-decoration: none;
            border-radius: 6px;
        }
        
        .download-link:hover {
            opacity: 0.9;
        }
        
        footer {
            text-align: center;
            padding: 30px;
            color: var(--text-secondary);
            font-size: 0.9em;
            border-top: 1px solid var(--border);
            margin-top: 40px;
        }
        
        @media (max-width: 768px) {
            .container {
                padding: 15px;
            }
            
            h1 {
                font-size: 1.8em;
            }
            
            .tabs {
                flex-direction: column;
            }
            
            .tab-btn {
                width: 100%;
                text-align: center;
            }
        }
    </style>
</head>
<body>
    <div class="lang-switch">
        <button class="lang-btn" onclick="toggleLang()">
            <span id="lang-text">ŸÅÿßÿ±ÿ≥€å</span>
        </button>
    </div>
    
    <div class="container">
        <header>
            <h1>üé¨ <span data-en="YouTube & Instagram Downloader API" data-fa="API ÿØÿßŸÜŸÑŸàÿØÿ± €åŸàÿ™€åŸàÿ® Ÿà ÿß€åŸÜÿ≥ÿ™ÿß⁄Øÿ±ÿßŸÖ">YouTube & Instagram Downloader API</span></h1>
            <p class="subtitle" data-en="Test all API endpoints interactively" data-fa="ÿ™ÿ≥ÿ™ ÿ™ÿπÿßŸÖŸÑ€å ÿ™ŸÖÿßŸÖ ŸÜŸÇÿßÿ∑ Ÿæÿß€åÿßŸÜ€å API">Test all API endpoints interactively</p>
        </header>
        
        <div class="warning">
            <strong data-en="‚ö†Ô∏è Legal Disclaimer:" data-fa="‚ö†Ô∏è ÿßÿÆÿ∑ÿßÿ± ÿ≠ŸÇŸàŸÇ€å:">‚ö†Ô∏è Legal Disclaimer:</strong>
            <span data-en="This tool is for personal, educational use only. Downloading copyrighted content may violate YouTube/Instagram Terms of Service and copyright laws. Use responsibly." data-fa="ÿß€åŸÜ ÿßÿ®ÿ≤ÿßÿ± ŸÅŸÇÿ∑ ÿ®ÿ±ÿß€å ÿßÿ≥ÿ™ŸÅÿßÿØŸá ÿ¥ÿÆÿµ€å Ÿà ÿ¢ŸÖŸàÿ≤ÿ¥€å ÿßÿ≥ÿ™. ÿØÿßŸÜŸÑŸàÿØ ŸÖÿ≠ÿ™Ÿàÿß€å ÿØÿßÿ±ÿß€å ÿ≠ŸÇ ŸÜÿ¥ÿ± ŸÖŸÖ⁄©ŸÜ ÿßÿ≥ÿ™ ŸÇŸàÿßŸÜ€åŸÜ €åŸàÿ™€åŸàÿ®/ÿß€åŸÜÿ≥ÿ™ÿß⁄Øÿ±ÿßŸÖ Ÿà ÿ≠ŸÇ ŸÜÿ¥ÿ± ÿ±ÿß ŸÜŸÇÿ∂ ⁄©ŸÜÿØ. ŸÖÿ≥ÿ¶ŸàŸÑÿßŸÜŸá ÿßÿ≥ÿ™ŸÅÿßÿØŸá ⁄©ŸÜ€åÿØ.">This tool is for personal, educational use only. Downloading copyrighted content may violate YouTube/Instagram Terms of Service and copyright laws. Use responsibly.</span>
        </div>
        
        <div style="display: flex; gap: 15px; margin-bottom: 20px;">
            <button class="tab-btn active" onclick="switchPlatform('youtube')" id="platform-youtube" style="background: #ff0000;">
                üé¨ <span data-en="YouTube" data-fa="€åŸàÿ™€åŸàÿ®">YouTube</span>
            </button>
            <button class="tab-btn" onclick="switchPlatform('instagram')" id="platform-instagram" style="background: linear-gradient(45deg, #405de6, #5851db, #833ab4, #c13584, #e1306c, #fd1d1d);">
                üì∏ <span data-en="Instagram" data-fa="ÿß€åŸÜÿ≥ÿ™ÿß⁄Øÿ±ÿßŸÖ">Instagram</span>
            </button>
        </div>
        
        <div id="youtube-section">
            <div class="tabs">
                <button class="tab-btn active" onclick="showTab('info')" data-en="Video Info" data-fa="ÿßÿ∑ŸÑÿßÿπÿßÿ™ Ÿà€åÿØ€åŸà">Video Info</button>
                <button class="tab-btn" onclick="showTab('formats')" data-en="Formats" data-fa="ŸÅÿ±ŸÖÿ™‚ÄåŸáÿß">Formats</button>
                <button class="tab-btn" onclick="showTab('download')" data-en="Download" data-fa="ÿØÿßŸÜŸÑŸàÿØ">Download</button>
                <button class="tab-btn" onclick="showTab('playlist')" data-en="Playlist" data-fa="ŸÑ€åÿ≥ÿ™ ŸæÿÆÿ¥">Playlist</button>
                <button class="tab-btn" onclick="showTab('subtitles')" data-en="Subtitles" data-fa="ÿ≤€åÿ±ŸÜŸà€åÿ≥">Subtitles</button>
                <button class="tab-btn" onclick="showTab('thumbnail')" data-en="Thumbnail" data-fa="ÿ™ÿµŸà€åÿ± ÿ®ŸÜÿØÿßŸÜ⁄Øÿ¥ÿ™€å">Thumbnail</button>
            </div>
        </div>
        
        <div id="instagram-section" style="display: none;">
            <div class="tabs">
                <button class="tab-btn active" onclick="showTab('ig-post-info')" data-en="Post Info" data-fa="ÿßÿ∑ŸÑÿßÿπÿßÿ™ Ÿæÿ≥ÿ™">Post Info</button>
                <button class="tab-btn" onclick="showTab('ig-reel-info')" data-en="Reel Info" data-fa="ÿßÿ∑ŸÑÿßÿπÿßÿ™ ÿ±€åŸÑÿ≤">Reel Info</button>
                <button class="tab-btn" onclick="showTab('ig-profile')" data-en="Profile" data-fa="Ÿæÿ±ŸàŸÅÿß€åŸÑ">Profile</button>
                <button class="tab-btn" onclick="showTab('ig-download')" data-en="Download" data-fa="ÿØÿßŸÜŸÑŸàÿØ">Download</button>
                <button class="tab-btn" onclick="showTab('ig-story')" data-en="Stories" data-fa="ÿßÿ≥ÿ™Ÿàÿ±€å">Stories</button>
                <button class="tab-btn" onclick="showTab('ig-batch')" data-en="Batch" data-fa="ÿØÿ≥ÿ™Ÿá‚Äåÿß€å">Batch</button>
            </div>
        </div>
        
        <div id="info" class="tab-content active">
            <div class="card">
                <h3 data-en="Get Video Information" data-fa="ÿØÿ±€åÿßŸÅÿ™ ÿßÿ∑ŸÑÿßÿπÿßÿ™ Ÿà€åÿØ€åŸà">Get Video Information</h3>
                <div class="form-group">
                    <label data-en="YouTube URL" data-fa="ÿ¢ÿØÿ±ÿ≥ €åŸàÿ™€åŸàÿ®">YouTube URL</label>
                    <input type="text" id="info-url" placeholder="https://www.youtube.com/watch?v=...">
                </div>
                <button class="btn" onclick="getInfo()" data-en="Get Info" data-fa="ÿØÿ±€åÿßŸÅÿ™ ÿßÿ∑ŸÑÿßÿπÿßÿ™">Get Info</button>
                <div class="loading" id="info-loading">
                    <div class="spinner"></div>
                    <span data-en="Loading..." data-fa="ÿØÿ± ÿ≠ÿßŸÑ ÿ®ÿßÿ±⁄Øÿ∞ÿßÿ±€å...">Loading...</span>
                </div>
                <div class="result" id="info-result"></div>
            </div>
        </div>
        
        <div id="formats" class="tab-content">
            <div class="card">
                <h3 data-en="Get Available Formats" data-fa="ÿØÿ±€åÿßŸÅÿ™ ŸÅÿ±ŸÖÿ™‚ÄåŸáÿß€å ŸÖŸàÿ¨ŸàÿØ">Get Available Formats</h3>
                <div class="form-group">
                    <label data-en="YouTube URL" data-fa="ÿ¢ÿØÿ±ÿ≥ €åŸàÿ™€åŸàÿ®">YouTube URL</label>
                    <input type="text" id="formats-url" placeholder="https://www.youtube.com/watch?v=...">
                </div>
                <button class="btn" onclick="getFormats()" data-en="Get Formats" data-fa="ÿØÿ±€åÿßŸÅÿ™ ŸÅÿ±ŸÖÿ™‚ÄåŸáÿß">Get Formats</button>
                <div class="loading" id="formats-loading">
                    <div class="spinner"></div>
                    <span data-en="Loading..." data-fa="ÿØÿ± ÿ≠ÿßŸÑ ÿ®ÿßÿ±⁄Øÿ∞ÿßÿ±€å...">Loading...</span>
                </div>
                <div class="result" id="formats-result"></div>
            </div>
        </div>
        
        <div id="download" class="tab-content">
            <div class="card">
                <h3 data-en="Download Video" data-fa="ÿØÿßŸÜŸÑŸàÿØ Ÿà€åÿØ€åŸà">Download Video</h3>
                <div class="form-group">
                    <label data-en="YouTube URL" data-fa="ÿ¢ÿØÿ±ÿ≥ €åŸàÿ™€åŸàÿ®">YouTube URL</label>
                    <input type="text" id="download-url" placeholder="https://www.youtube.com/watch?v=...">
                </div>
                <div class="form-group">
                    <label data-en="Quality" data-fa="⁄©€åŸÅ€åÿ™">Quality</label>
                    <select id="download-quality">
                        <option value="best">Best</option>
                        <option value="1080p">1080p</option>
                        <option value="720p">720p</option>
                        <option value="480p">480p</option>
                        <option value="worst">Worst</option>
                        <option value="audio_only">Audio Only</option>
                    </select>
                </div>
                <div class="form-group">
                    <label data-en="Type" data-fa="ŸÜŸàÿπ">Type</label>
                    <select id="download-type">
                        <option value="video">Video</option>
                        <option value="audio">Audio</option>
                    </select>
                </div>
                <div class="form-group">
                    <label data-en="Audio Format (for audio downloads)" data-fa="ŸÅÿ±ŸÖÿ™ ÿµÿØÿß (ÿ®ÿ±ÿß€å ÿØÿßŸÜŸÑŸàÿØ ÿµÿØÿß)">Audio Format (for audio downloads)</label>
                    <select id="download-audio-format">
                        <option value="best">Best</option>
                        <option value="mp3">MP3</option>
                        <option value="m4a">M4A</option>
                    </select>
                </div>
                <button class="btn" onclick="startDownload()" data-en="Start Download" data-fa="ÿ¥ÿ±Ÿàÿπ ÿØÿßŸÜŸÑŸàÿØ">Start Download</button>
                <div class="loading" id="download-loading">
                    <div class="spinner"></div>
                    <span data-en="Downloading..." data-fa="ÿØÿ± ÿ≠ÿßŸÑ ÿØÿßŸÜŸÑŸàÿØ...">Downloading...</span>
                    <div class="progress-bar">
                        <div class="progress-fill" id="download-progress" style="width: 0%"></div>
                    </div>
                </div>
                <div class="result" id="download-result"></div>
            </div>
        </div>
        
        <div id="playlist" class="tab-content">
            <div class="card">
                <h3 data-en="Playlist Operations" data-fa="ÿπŸÖŸÑ€åÿßÿ™ ŸÑ€åÿ≥ÿ™ ŸæÿÆÿ¥">Playlist Operations</h3>
                <div class="form-group">
                    <label data-en="Playlist URL" data-fa="ÿ¢ÿØÿ±ÿ≥ ŸÑ€åÿ≥ÿ™ ŸæÿÆÿ¥">Playlist URL</label>
                    <input type="text" id="playlist-url" placeholder="https://www.youtube.com/playlist?list=...">
                </div>
                <button class="btn" onclick="getPlaylistInfo()" style="margin-right: 10px;" data-en="Get Playlist Info" data-fa="ÿØÿ±€åÿßŸÅÿ™ ÿßÿ∑ŸÑÿßÿπÿßÿ™ ŸÑ€åÿ≥ÿ™ ŸæÿÆÿ¥">Get Playlist Info</button>
                <div class="loading" id="playlist-loading">
                    <div class="spinner"></div>
                    <span data-en="Loading..." data-fa="ÿØÿ± ÿ≠ÿßŸÑ ÿ®ÿßÿ±⁄Øÿ∞ÿßÿ±€å...">Loading...</span>
                </div>
                <div class="result" id="playlist-result"></div>
            </div>
        </div>
        
        <div id="subtitles" class="tab-content">
            <div class="card">
                <h3 data-en="Get Subtitles" data-fa="ÿØÿ±€åÿßŸÅÿ™ ÿ≤€åÿ±ŸÜŸà€åÿ≥">Get Subtitles</h3>
                <div class="form-group">
                    <label data-en="YouTube URL" data-fa="ÿ¢ÿØÿ±ÿ≥ €åŸàÿ™€åŸàÿ®">YouTube URL</label>
                    <input type="text" id="subtitles-url" placeholder="https://www.youtube.com/watch?v=...">
                </div>
                <div class="form-group">
                    <label data-en="Language (e.g., en, fa, all)" data-fa="ÿ≤ÿ®ÿßŸÜ (ŸÖÿ´ŸÑÿß en, fa, all)">Language (e.g., en, fa, all)</label>
                    <input type="text" id="subtitles-lang" value="all">
                </div>
                <button class="btn" onclick="getSubtitles()" data-en="Get Subtitles" data-fa="ÿØÿ±€åÿßŸÅÿ™ ÿ≤€åÿ±ŸÜŸà€åÿ≥">Get Subtitles</button>
                <div class="loading" id="subtitles-loading">
                    <div class="spinner"></div>
                    <span data-en="Loading..." data-fa="ÿØÿ± ÿ≠ÿßŸÑ ÿ®ÿßÿ±⁄Øÿ∞ÿßÿ±€å...">Loading...</span>
                </div>
                <div class="result" id="subtitles-result"></div>
            </div>
        </div>
        
        <div id="thumbnail" class="tab-content">
            <div class="card">
                <h3 data-en="Get Thumbnail" data-fa="ÿØÿ±€åÿßŸÅÿ™ ÿ™ÿµŸà€åÿ± ÿ®ŸÜÿØÿßŸÜ⁄Øÿ¥ÿ™€å">Get Thumbnail</h3>
                <div class="form-group">
                    <label data-en="YouTube URL" data-fa="ÿ¢ÿØÿ±ÿ≥ €åŸàÿ™€åŸàÿ®">YouTube URL</label>
                    <input type="text" id="thumbnail-url" placeholder="https://www.youtube.com/watch?v=...">
                </div>
                <div class="form-group">
                    <label data-en="Quality" data-fa="⁄©€åŸÅ€åÿ™">Quality</label>
                    <select id="thumbnail-quality">
                        <option value="maxres">Max Resolution</option>
                        <option value="hq">High Quality</option>
                        <option value="mq">Medium Quality</option>
                        <option value="sd">Standard</option>
                        <option value="default">Default</option>
                    </select>
                </div>
                <button class="btn" onclick="getThumbnail()" data-en="Get Thumbnail" data-fa="ÿØÿ±€åÿßŸÅÿ™ ÿ™ÿµŸà€åÿ±">Get Thumbnail</button>
                <div class="loading" id="thumbnail-loading">
                    <div class="spinner"></div>
                    <span data-en="Loading..." data-fa="ÿØÿ± ÿ≠ÿßŸÑ ÿ®ÿßÿ±⁄Øÿ∞ÿßÿ±€å...">Loading...</span>
                </div>
                <div class="result" id="thumbnail-result"></div>
            </div>
        </div>
        
        <div id="ig-post-info" class="tab-content">
            <div class="card">
                <h3 data-en="Get Instagram Post Information" data-fa="ÿØÿ±€åÿßŸÅÿ™ ÿßÿ∑ŸÑÿßÿπÿßÿ™ Ÿæÿ≥ÿ™ ÿß€åŸÜÿ≥ÿ™ÿß⁄Øÿ±ÿßŸÖ">Get Instagram Post Information</h3>
                <div class="form-group">
                    <label data-en="Instagram Post URL or Shortcode" data-fa="ÿ¢ÿØÿ±ÿ≥ €åÿß ⁄©ÿØ Ÿæÿ≥ÿ™ ÿß€åŸÜÿ≥ÿ™ÿß⁄Øÿ±ÿßŸÖ">Instagram Post URL or Shortcode</label>
                    <input type="text" id="ig-post-url" placeholder="https://www.instagram.com/p/ABC123/ or ABC123">
                </div>
                <button class="btn" onclick="getIgPostInfo()" style="background: linear-gradient(45deg, #833ab4, #fd1d1d, #fcb045);" data-en="Get Post Info" data-fa="ÿØÿ±€åÿßŸÅÿ™ ÿßÿ∑ŸÑÿßÿπÿßÿ™ Ÿæÿ≥ÿ™">Get Post Info</button>
                <div class="loading" id="ig-post-info-loading">
                    <div class="spinner"></div>
                    <span data-en="Loading..." data-fa="ÿØÿ± ÿ≠ÿßŸÑ ÿ®ÿßÿ±⁄Øÿ∞ÿßÿ±€å...">Loading...</span>
                </div>
                <div class="result" id="ig-post-info-result"></div>
            </div>
        </div>
        
        <div id="ig-reel-info" class="tab-content">
            <div class="card">
                <h3 data-en="Get Instagram Reel Information" data-fa="ÿØÿ±€åÿßŸÅÿ™ ÿßÿ∑ŸÑÿßÿπÿßÿ™ ÿ±€åŸÑÿ≤ ÿß€åŸÜÿ≥ÿ™ÿß⁄Øÿ±ÿßŸÖ">Get Instagram Reel Information</h3>
                <div class="form-group">
                    <label data-en="Instagram Reel URL or Shortcode" data-fa="ÿ¢ÿØÿ±ÿ≥ €åÿß ⁄©ÿØ ÿ±€åŸÑÿ≤ ÿß€åŸÜÿ≥ÿ™ÿß⁄Øÿ±ÿßŸÖ">Instagram Reel URL or Shortcode</label>
                    <input type="text" id="ig-reel-url" placeholder="https://www.instagram.com/reel/ABC123/ or ABC123">
                </div>
                <button class="btn" onclick="getIgReelInfo()" style="background: linear-gradient(45deg, #833ab4, #fd1d1d, #fcb045);" data-en="Get Reel Info" data-fa="ÿØÿ±€åÿßŸÅÿ™ ÿßÿ∑ŸÑÿßÿπÿßÿ™ ÿ±€åŸÑÿ≤">Get Reel Info</button>
                <div class="loading" id="ig-reel-info-loading">
                    <div class="spinner"></div>
                    <span data-en="Loading..." data-fa="ÿØÿ± ÿ≠ÿßŸÑ ÿ®ÿßÿ±⁄Øÿ∞ÿßÿ±€å...">Loading...</span>
                </div>
                <div class="result" id="ig-reel-info-result"></div>
            </div>
        </div>
        
        <div id="ig-profile" class="tab-content">
            <div class="card">
                <h3 data-en="Get Instagram Profile Information" data-fa="ÿØÿ±€åÿßŸÅÿ™ ÿßÿ∑ŸÑÿßÿπÿßÿ™ Ÿæÿ±ŸàŸÅÿß€åŸÑ ÿß€åŸÜÿ≥ÿ™ÿß⁄Øÿ±ÿßŸÖ">Get Instagram Profile Information</h3>
                <div class="form-group">
                    <label data-en="Instagram Username" data-fa="ŸÜÿßŸÖ ⁄©ÿßÿ±ÿ®ÿ±€å ÿß€åŸÜÿ≥ÿ™ÿß⁄Øÿ±ÿßŸÖ">Instagram Username</label>
                    <input type="text" id="ig-username" placeholder="instagram or @instagram">
                </div>
                <button class="btn" onclick="getIgProfile()" style="background: linear-gradient(45deg, #833ab4, #fd1d1d, #fcb045);" data-en="Get Profile Info" data-fa="ÿØÿ±€åÿßŸÅÿ™ ÿßÿ∑ŸÑÿßÿπÿßÿ™ Ÿæÿ±ŸàŸÅÿß€åŸÑ">Get Profile Info</button>
                <div class="loading" id="ig-profile-loading">
                    <div class="spinner"></div>
                    <span data-en="Loading..." data-fa="ÿØÿ± ÿ≠ÿßŸÑ ÿ®ÿßÿ±⁄Øÿ∞ÿßÿ±€å...">Loading...</span>
                </div>
                <div class="result" id="ig-profile-result"></div>
            </div>
        </div>
        
        <div id="ig-download" class="tab-content">
            <div class="card">
                <h3 data-en="Download Instagram Content" data-fa="ÿØÿßŸÜŸÑŸàÿØ ŸÖÿ≠ÿ™Ÿàÿß€å ÿß€åŸÜÿ≥ÿ™ÿß⁄Øÿ±ÿßŸÖ">Download Instagram Content</h3>
                <div class="form-group">
                    <label data-en="Content Type" data-fa="ŸÜŸàÿπ ŸÖÿ≠ÿ™Ÿàÿß">Content Type</label>
                    <select id="ig-content-type">
                        <option value="post" data-en="Post (Image/Video/Carousel)" data-fa="Ÿæÿ≥ÿ™ (ÿπ⁄©ÿ≥/Ÿà€åÿØ€åŸà/⁄©ÿßÿ±Ÿàÿ≥ŸÑ)">Post (Image/Video/Carousel)</option>
                        <option value="reel" data-en="Reel" data-fa="ÿ±€åŸÑÿ≤">Reel</option>
                        <option value="carousel" data-en="Carousel as ZIP" data-fa="⁄©ÿßÿ±Ÿàÿ≥ŸÑ ÿ®Ÿá ÿµŸàÿ±ÿ™ ZIP">Carousel as ZIP</option>
                    </select>
                </div>
                <div class="form-group">
                    <label data-en="Instagram URL or Shortcode" data-fa="ÿ¢ÿØÿ±ÿ≥ €åÿß ⁄©ÿØ ÿß€åŸÜÿ≥ÿ™ÿß⁄Øÿ±ÿßŸÖ">Instagram URL or Shortcode</label>
                    <input type="text" id="ig-download-url" placeholder="https://www.instagram.com/p/ABC123/ or ABC123">
                </div>
                <div class="form-group">
                    <label data-en="Quality" data-fa="⁄©€åŸÅ€åÿ™">Quality</label>
                    <select id="ig-download-quality">
                        <option value="best">Best</option>
                        <option value="1080p">1080p</option>
                        <option value="720p">720p</option>
                        <option value="480p">480p</option>
                    </select>
                </div>
                <div class="form-group" id="ig-audio-format-group" style="display: none;">
                    <label data-en="Audio Format (for audio extraction)" data-fa="ŸÅÿ±ŸÖÿ™ ÿµÿØÿß (ÿ®ÿ±ÿß€å ÿßÿ≥ÿ™ÿÆÿ±ÿßÿ¨ ÿµÿØÿß)">Audio Format (for audio extraction)</label>
                    <select id="ig-audio-format">
                        <option value="best">Best</option>
                        <option value="mp3">MP3</option>
                        <option value="m4a">M4A</option>
                    </select>
                </div>
                <button class="btn" onclick="startIgDownload()" style="background: linear-gradient(45deg, #833ab4, #fd1d1d, #fcb045);" data-en="Start Download" data-fa="ÿ¥ÿ±Ÿàÿπ ÿØÿßŸÜŸÑŸàÿØ">Start Download</button>
                <div class="loading" id="ig-download-loading">
                    <div class="spinner"></div>
                    <span data-en="Downloading..." data-fa="ÿØÿ± ÿ≠ÿßŸÑ ÿØÿßŸÜŸÑŸàÿØ...">Downloading...</span>
                    <div class="progress-bar">
                        <div class="progress-fill" id="ig-download-progress" style="width: 0%"></div>
                    </div>
                </div>
                <div class="result" id="ig-download-result"></div>
            </div>
        </div>
        
        <div id="ig-story" class="tab-content">
            <div class="card">
                <h3 data-en="Download Instagram Stories" data-fa="ÿØÿßŸÜŸÑŸàÿØ ÿßÿ≥ÿ™Ÿàÿ±€å‚ÄåŸáÿß€å ÿß€åŸÜÿ≥ÿ™ÿß⁄Øÿ±ÿßŸÖ">Download Instagram Stories</h3>
                <div class="form-group">
                    <label data-en="Instagram Username" data-fa="ŸÜÿßŸÖ ⁄©ÿßÿ±ÿ®ÿ±€å ÿß€åŸÜÿ≥ÿ™ÿß⁄Øÿ±ÿßŸÖ">Instagram Username</label>
                    <input type="text" id="ig-story-username" placeholder="instagram or @instagram">
                </div>
                <div class="form-group">
                    <label data-en="Output Format" data-fa="ŸÅÿ±ŸÖÿ™ ÿÆÿ±Ÿàÿ¨€å">Output Format</label>
                    <select id="ig-story-format">
                        <option value="individual" data-en="Individual Files" data-fa="ŸÅÿß€åŸÑ‚ÄåŸáÿß€å ÿ¨ÿØÿß⁄ØÿßŸÜŸá">Individual Files</option>
                        <option value="zip" data-en="ZIP Archive" data-fa="ŸÅÿß€åŸÑ ZIP">ZIP Archive</option>
                    </select>
                </div>
                <button class="btn" onclick="downloadIgStory()" style="background: linear-gradient(45deg, #833ab4, #fd1d1d, #fcb045);" data-en="Download Stories" data-fa="ÿØÿßŸÜŸÑŸàÿØ ÿßÿ≥ÿ™Ÿàÿ±€å‚ÄåŸáÿß">Download Stories</button>
                <div class="loading" id="ig-story-loading">
                    <div class="spinner"></div>
                    <span data-en="Downloading..." data-fa="ÿØÿ± ÿ≠ÿßŸÑ ÿØÿßŸÜŸÑŸàÿØ...">Downloading...</span>
                    <div class="progress-bar">
                        <div class="progress-fill" id="ig-story-progress" style="width: 0%"></div>
                    </div>
                </div>
                <div class="result" id="ig-story-result"></div>
            </div>
        </div>
        
        <div id="ig-batch" class="tab-content">
            <div class="card">
                <h3 data-en="Batch Download Instagram Content" data-fa="ÿØÿßŸÜŸÑŸàÿØ ÿØÿ≥ÿ™Ÿá‚Äåÿß€å ŸÖÿ≠ÿ™Ÿàÿß€å ÿß€åŸÜÿ≥ÿ™ÿß⁄Øÿ±ÿßŸÖ">Batch Download Instagram Content</h3>
                <div class="form-group">
                    <label data-en="URLs (one per line, format: URL|type where type is post/reel)" data-fa="ÿ¢ÿØÿ±ÿ≥‚ÄåŸáÿß (Ÿáÿ± ÿÆÿ∑ €å⁄© ÿ¢ÿØÿ±ÿ≥ÿå ŸÅÿ±ŸÖÿ™: URL|type ⁄©Ÿá type ŸÖ€å‚Äåÿ™ŸàÿßŸÜÿØ post €åÿß reel ÿ®ÿßÿ¥ÿØ)">URLs (one per line, format: URL|type)</label>
                    <textarea id="ig-batch-urls" rows="6" placeholder="https://www.instagram.com/p/ABC123/|post
https://www.instagram.com/reel/DEF456/|reel"></textarea>
                </div>
                <div class="form-group">
                    <label data-en="Quality" data-fa="⁄©€åŸÅ€åÿ™">Quality</label>
                    <select id="ig-batch-quality">
                        <option value="best">Best</option>
                        <option value="1080p">1080p</option>
                        <option value="720p">720p</option>
                    </select>
                </div>
                <button class="btn" onclick="startIgBatchDownload()" style="background: linear-gradient(45deg, #833ab4, #fd1d1d, #fcb045);" data-en="Start Batch Download" data-fa="ÿ¥ÿ±Ÿàÿπ ÿØÿßŸÜŸÑŸàÿØ ÿØÿ≥ÿ™Ÿá‚Äåÿß€å">Start Batch Download</button>
                <div class="loading" id="ig-batch-loading">
                    <div class="spinner"></div>
                    <span data-en="Downloading..." data-fa="ÿØÿ± ÿ≠ÿßŸÑ ÿØÿßŸÜŸÑŸàÿØ...">Downloading...</span>
                    <div class="progress-bar">
                        <div class="progress-fill" id="ig-batch-progress" style="width: 0%"></div>
                    </div>
                </div>
                <div class="result" id="ig-batch-result"></div>
            </div>
        </div>
        
        <footer>
            <p data-en="Designed by Mezd and powered by Mezdia" data-fa="ÿ∑ÿ±ÿßÿ≠€å ÿ¥ÿØŸá ÿ™Ÿàÿ≥ÿ∑ Mezd Ÿà ŸÇÿØÿ±ÿ™ ⁄Øÿ±ŸÅÿ™Ÿá ÿßÿ≤ Mezdia">Designed by Mezd and powered by Mezdia</p>
            <p data-en="YouTube & Instagram Downloader API v2.0 - Powered by yt-dlp" data-fa="API ÿØÿßŸÜŸÑŸàÿØÿ± €åŸàÿ™€åŸàÿ® Ÿà ÿß€åŸÜÿ≥ÿ™ÿß⁄Øÿ±ÿßŸÖ ŸÜÿ≥ÿÆŸá 2.0 - ÿ®ÿß ŸÇÿØÿ±ÿ™ yt-dlp">YouTube & Instagram Downloader API v2.0 - Powered by yt-dlp</p>
            <p><a href="/docs" style="color: var(--primary);" data-en="API Documentation (Swagger)" data-fa="ŸÖÿ≥ÿ™ŸÜÿØÿßÿ™ API (Swagger)">API Documentation (Swagger)</a></p>
        </footer>
    </div>
    
    <script>
        let currentLang = 'en';
        let currentPlatform = 'youtube';
        const API_BASE = '';
        
        function toggleLang() {
            currentLang = currentLang === 'en' ? 'fa' : 'en';
            document.getElementById('lang-text').textContent = currentLang === 'en' ? 'ŸÅÿßÿ±ÿ≥€å' : 'English';
            document.body.classList.toggle('rtl', currentLang === 'fa');
            document.documentElement.lang = currentLang;
            document.documentElement.dir = currentLang === 'fa' ? 'rtl' : 'ltr';
            
            document.querySelectorAll('[data-en]').forEach(el => {
                el.textContent = el.getAttribute(`data-${currentLang}`);
            });
        }
        
        function switchPlatform(platform) {
            currentPlatform = platform;
            document.getElementById('youtube-section').style.display = platform === 'youtube' ? 'block' : 'none';
            document.getElementById('instagram-section').style.display = platform === 'instagram' ? 'block' : 'none';
            document.getElementById('platform-youtube').classList.toggle('active', platform === 'youtube');
            document.getElementById('platform-instagram').classList.toggle('active', platform === 'instagram');
            
            document.querySelectorAll('.tab-content').forEach(el => el.classList.remove('active'));
            document.querySelectorAll('.tab-btn').forEach(el => el.classList.remove('active'));
            
            if (platform === 'youtube') {
                document.getElementById('info').classList.add('active');
                document.querySelector('#youtube-section .tab-btn').classList.add('active');
            } else {
                document.getElementById('ig-post-info').classList.add('active');
                document.querySelector('#instagram-section .tab-btn').classList.add('active');
            }
        }
        
        function showTab(tabId) {
            document.querySelectorAll('.tab-content').forEach(el => el.classList.remove('active'));
            const currentSection = currentPlatform === 'youtube' ? '#youtube-section' : '#instagram-section';
            document.querySelectorAll(`${currentSection} .tab-btn`).forEach(el => el.classList.remove('active'));
            document.getElementById(tabId).classList.add('active');
            event.target.classList.add('active');
        }
        
        function showLoading(id, show) {
            document.getElementById(`${id}-loading`).classList.toggle('show', show);
        }
        
        function showResult(id, data, isError = false) {
            const resultEl = document.getElementById(`${id}-result`);
            resultEl.innerHTML = `<pre>${JSON.stringify(data, null, 2)}</pre>`;
            resultEl.className = `result ${isError ? 'error' : 'success'}`;
        }
        
        async function apiCall(endpoint, options = {}) {
            const response = await fetch(`${API_BASE}${endpoint}`, options);
            const data = await response.json();
            if (!response.ok) {
                throw new Error(data.detail || 'API Error');
            }
            return data;
        }
        
        async function getInfo() {
            const url = document.getElementById('info-url').value;
            if (!url) return alert(currentLang === 'en' ? 'Please enter a URL' : 'ŸÑÿ∑ŸÅÿß ÿ¢ÿØÿ±ÿ≥ ÿ±ÿß Ÿàÿßÿ±ÿØ ⁄©ŸÜ€åÿØ');
            
            showLoading('info', true);
            try {
                const data = await apiCall(`/info?url=${encodeURIComponent(url)}`);
                showResult('info', data);
            } catch (e) {
                showResult('info', { error: e.message }, true);
            }
            showLoading('info', false);
        }
        
        async function getFormats() {
            const url = document.getElementById('formats-url').value;
            if (!url) return alert(currentLang === 'en' ? 'Please enter a URL' : 'ŸÑÿ∑ŸÅÿß ÿ¢ÿØÿ±ÿ≥ ÿ±ÿß Ÿàÿßÿ±ÿØ ⁄©ŸÜ€åÿØ');
            
            showLoading('formats', true);
            try {
                const data = await apiCall(`/formats?url=${encodeURIComponent(url)}`);
                showResult('formats', data);
            } catch (e) {
                showResult('formats', { error: e.message }, true);
            }
            showLoading('formats', false);
        }
        
        async function startDownload() {
            const url = document.getElementById('download-url').value;
            if (!url) return alert(currentLang === 'en' ? 'Please enter a URL' : 'ŸÑÿ∑ŸÅÿß ÿ¢ÿØÿ±ÿ≥ ÿ±ÿß Ÿàÿßÿ±ÿØ ⁄©ŸÜ€åÿØ');
            
            const quality = document.getElementById('download-quality').value;
            const type = document.getElementById('download-type').value;
            const audioFormat = document.getElementById('download-audio-format').value;
            
            showLoading('download', true);
            document.getElementById('download-progress').style.width = '0%';
            
            try {
                const data = await apiCall('/download/single', {
                    method: 'POST',
                    headers: { 'Content-Type': 'application/json' },
                    body: JSON.stringify({ url, quality, type, audio_format: audioFormat })
                });
                
                pollJobStatus(data.job_id, 'download');
            } catch (e) {
                showResult('download', { error: e.message }, true);
                showLoading('download', false);
            }
        }
        
        async function pollJobStatus(jobId, resultId) {
            try {
                const data = await apiCall(`/status/${jobId}`);
                document.getElementById('download-progress').style.width = `${data.progress}%`;
                
                if (data.status === 'completed') {
                    showLoading(resultId, false);
                    let html = `<pre>${JSON.stringify(data, null, 2)}</pre>`;
                    if (data.files && data.files.length > 0) {
                        html += '<div style="margin-top: 15px;">';
                        data.files.forEach(file => {
                            html += `<a href="${file.download_url}" class="download-link" download>${currentLang === 'en' ? 'Download' : 'ÿØÿßŸÜŸÑŸàÿØ'}: ${file.filename}</a><br><br>`;
                        });
                        html += '</div>';
                    }
                    document.getElementById(`${resultId}-result`).innerHTML = html;
                    document.getElementById(`${resultId}-result`).className = 'result success';
                } else if (data.status === 'failed') {
                    showLoading(resultId, false);
                    showResult(resultId, data, true);
                } else {
                    setTimeout(() => pollJobStatus(jobId, resultId), 2000);
                }
            } catch (e) {
                showLoading(resultId, false);
                showResult(resultId, { error: e.message }, true);
            }
        }
        
        async function getPlaylistInfo() {
            const url = document.getElementById('playlist-url').value;
            if (!url) return alert(currentLang === 'en' ? 'Please enter a URL' : 'ŸÑÿ∑ŸÅÿß ÿ¢ÿØÿ±ÿ≥ ÿ±ÿß Ÿàÿßÿ±ÿØ ⁄©ŸÜ€åÿØ');
            
            showLoading('playlist', true);
            try {
                const data = await apiCall(`/download/playlist/info?url=${encodeURIComponent(url)}`);
                showResult('playlist', data);
            } catch (e) {
                showResult('playlist', { error: e.message }, true);
            }
            showLoading('playlist', false);
        }
        
        async function getSubtitles() {
            const url = document.getElementById('subtitles-url').value;
            const lang = document.getElementById('subtitles-lang').value;
            if (!url) return alert(currentLang === 'en' ? 'Please enter a URL' : 'ŸÑÿ∑ŸÅÿß ÿ¢ÿØÿ±ÿ≥ ÿ±ÿß Ÿàÿßÿ±ÿØ ⁄©ŸÜ€åÿØ');
            
            showLoading('subtitles', true);
            try {
                const data = await apiCall(`/subtitles?url=${encodeURIComponent(url)}&lang=${encodeURIComponent(lang)}`);
                showResult('subtitles', data);
            } catch (e) {
                showResult('subtitles', { error: e.message }, true);
            }
            showLoading('subtitles', false);
        }
        
        async function getThumbnail() {
            const url = document.getElementById('thumbnail-url').value;
            const quality = document.getElementById('thumbnail-quality').value;
            if (!url) return alert(currentLang === 'en' ? 'Please enter a URL' : 'ŸÑÿ∑ŸÅÿß ÿ¢ÿØÿ±ÿ≥ ÿ±ÿß Ÿàÿßÿ±ÿØ ⁄©ŸÜ€åÿØ');
            
            showLoading('thumbnail', true);
            try {
                const data = await apiCall(`/thumbnail?url=${encodeURIComponent(url)}&quality=${quality}`);
                let html = `<pre>${JSON.stringify(data, null, 2)}</pre>`;
                if (data.thumbnail_url) {
                    html += `<div style="margin-top: 15px;"><img src="${data.thumbnail_url}" style="max-width: 100%; border-radius: 8px;" alt="Thumbnail"></div>`;
                }
                document.getElementById('thumbnail-result').innerHTML = html;
                document.getElementById('thumbnail-result').className = 'result success';
            } catch (e) {
                showResult('thumbnail', { error: e.message }, true);
            }
            showLoading('thumbnail', false);
        }
        
        async function getIgPostInfo() {
            const url = document.getElementById('ig-post-url').value;
            if (!url) return alert(currentLang === 'en' ? 'Please enter a URL or shortcode' : 'ŸÑÿ∑ŸÅÿß ÿ¢ÿØÿ±ÿ≥ €åÿß ⁄©ÿØ ÿ±ÿß Ÿàÿßÿ±ÿØ ⁄©ŸÜ€åÿØ');
            
            showLoading('ig-post-info', true);
            try {
                const data = await apiCall(`/instagram/post/info?url=${encodeURIComponent(url)}`);
                let html = `<pre>${JSON.stringify(data, null, 2)}</pre>`;
                if (data.thumbnail) {
                    html += `<div style="margin-top: 15px;"><img src="${data.thumbnail}" style="max-width: 100%; max-height: 300px; border-radius: 8px;" alt="Post thumbnail"></div>`;
                }
                document.getElementById('ig-post-info-result').innerHTML = html;
                document.getElementById('ig-post-info-result').className = 'result success';
            } catch (e) {
                showResult('ig-post-info', { error: e.message }, true);
            }
            showLoading('ig-post-info', false);
        }
        
        async function getIgReelInfo() {
            const url = document.getElementById('ig-reel-url').value;
            if (!url) return alert(currentLang === 'en' ? 'Please enter a URL or shortcode' : 'ŸÑÿ∑ŸÅÿß ÿ¢ÿØÿ±ÿ≥ €åÿß ⁄©ÿØ ÿ±ÿß Ÿàÿßÿ±ÿØ ⁄©ŸÜ€åÿØ');
            
            showLoading('ig-reel-info', true);
            try {
                const data = await apiCall(`/instagram/reel/info?url=${encodeURIComponent(url)}`);
                let html = `<pre>${JSON.stringify(data, null, 2)}</pre>`;
                if (data.thumbnail) {
                    html += `<div style="margin-top: 15px;"><img src="${data.thumbnail}" style="max-width: 100%; max-height: 300px; border-radius: 8px;" alt="Reel thumbnail"></div>`;
                }
                document.getElementById('ig-reel-info-result').innerHTML = html;
                document.getElementById('ig-reel-info-result').className = 'result success';
            } catch (e) {
                showResult('ig-reel-info', { error: e.message }, true);
            }
            showLoading('ig-reel-info', false);
        }
        
        async function getIgProfile() {
            const username = document.getElementById('ig-username').value;
            if (!username) return alert(currentLang === 'en' ? 'Please enter a username' : 'ŸÑÿ∑ŸÅÿß ŸÜÿßŸÖ ⁄©ÿßÿ±ÿ®ÿ±€å ÿ±ÿß Ÿàÿßÿ±ÿØ ⁄©ŸÜ€åÿØ');
            
            showLoading('ig-profile', true);
            try {
                const data = await apiCall(`/instagram/profile/info?username=${encodeURIComponent(username)}`);
                showResult('ig-profile', data);
            } catch (e) {
                showResult('ig-profile', { error: e.message }, true);
            }
            showLoading('ig-profile', false);
        }
        
        async function startIgDownload() {
            const url = document.getElementById('ig-download-url').value;
            const contentType = document.getElementById('ig-content-type').value;
            const quality = document.getElementById('ig-download-quality').value;
            
            if (!url) return alert(currentLang === 'en' ? 'Please enter a URL' : 'ŸÑÿ∑ŸÅÿß ÿ¢ÿØÿ±ÿ≥ ÿ±ÿß Ÿàÿßÿ±ÿØ ⁄©ŸÜ€åÿØ');
            
            showLoading('ig-download', true);
            document.getElementById('ig-download-progress').style.width = '0%';
            
            try {
                let endpoint = '/instagram/download/post';
                let body = { url, quality };
                
                if (contentType === 'reel') {
                    endpoint = '/instagram/download/reel';
                } else if (contentType === 'carousel') {
                    endpoint = '/instagram/download/carousel';
                    body.include_metadata = true;
                }
                
                const data = await apiCall(endpoint, {
                    method: 'POST',
                    headers: { 'Content-Type': 'application/json' },
                    body: JSON.stringify(body)
                });
                
                pollIgJobStatus(data.job_id, 'ig-download');
            } catch (e) {
                showResult('ig-download', { error: e.message }, true);
                showLoading('ig-download', false);
            }
        }
        
        async function downloadIgStory() {
            const username = document.getElementById('ig-story-username').value;
            const format = document.getElementById('ig-story-format').value;
            
            if (!username) return alert(currentLang === 'en' ? 'Please enter a username' : 'ŸÑÿ∑ŸÅÿß ŸÜÿßŸÖ ⁄©ÿßÿ±ÿ®ÿ±€å ÿ±ÿß Ÿàÿßÿ±ÿØ ⁄©ŸÜ€åÿØ');
            
            showLoading('ig-story', true);
            document.getElementById('ig-story-progress').style.width = '0%';
            
            try {
                const data = await apiCall('/instagram/download/story', {
                    method: 'POST',
                    headers: { 'Content-Type': 'application/json' },
                    body: JSON.stringify({ username, format, quality: 'best' })
                });
                
                pollIgJobStatus(data.job_id, 'ig-story');
            } catch (e) {
                showResult('ig-story', { error: e.message }, true);
                showLoading('ig-story', false);
            }
        }
        
        async function startIgBatchDownload() {
            const urlsText = document.getElementById('ig-batch-urls').value;
            const quality = document.getElementById('ig-batch-quality').value;
            
            if (!urlsText.trim()) return alert(currentLang === 'en' ? 'Please enter URLs' : 'ŸÑÿ∑ŸÅÿß ÿ¢ÿØÿ±ÿ≥‚ÄåŸáÿß ÿ±ÿß Ÿàÿßÿ±ÿØ ⁄©ŸÜ€åÿØ');
            
            const items = urlsText.trim().split('\n').map(line => {
                const parts = line.trim().split('|');
                return {
                    url: parts[0].trim(),
                    type: parts[1] ? parts[1].trim() : 'post'
                };
            }).filter(item => item.url);
            
            if (items.length === 0) return alert(currentLang === 'en' ? 'No valid URLs found' : 'ÿ¢ÿØÿ±ÿ≥ ŸÖÿπÿ™ÿ®ÿ±€å €åÿßŸÅÿ™ ŸÜÿ¥ÿØ');
            
            showLoading('ig-batch', true);
            document.getElementById('ig-batch-progress').style.width = '0%';
            
            try {
                const data = await apiCall('/instagram/download/batch', {
                    method: 'POST',
                    headers: { 'Content-Type': 'application/json' },
                    body: JSON.stringify({ items, quality, continue_on_error: true })
                });
                
                pollIgJobStatus(data.job_id, 'ig-batch');
            } catch (e) {
                showResult('ig-batch', { error: e.message }, true);
                showLoading('ig-batch', false);
            }
        }
        
        async function pollIgJobStatus(jobId, resultId) {
            try {
                const data = await apiCall(`/instagram/status/${jobId}`);
                const progressEl = document.getElementById(`${resultId}-progress`);
                if (progressEl) {
                    progressEl.style.width = `${data.progress}%`;
                }
                
                if (data.status === 'completed') {
                    showLoading(resultId, false);
                    let html = `<pre>${JSON.stringify(data, null, 2)}</pre>`;
                    if (data.files && data.files.length > 0) {
                        html += '<div style="margin-top: 15px;">';
                        data.files.forEach(file => {
                            html += `<a href="${file.download_url}" class="download-link" download style="margin: 5px; display: inline-block;">${currentLang === 'en' ? 'Download' : 'ÿØÿßŸÜŸÑŸàÿØ'}: ${file.filename} (${file.size_mb || 'N/A'} MB)</a><br>`;
                        });
                        html += '</div>';
                    }
                    document.getElementById(`${resultId}-result`).innerHTML = html;
                    document.getElementById(`${resultId}-result`).className = 'result success';
                } else if (data.status === 'failed') {
                    showLoading(resultId, false);
                    showResult(resultId, data, true);
                } else {
                    setTimeout(() => pollIgJobStatus(jobId, resultId), 2000);
                }
            } catch (e) {
                showLoading(resultId, false);
                showResult(resultId, { error: e.message }, true);
            }
        }
    </script>
</body>
</html>
